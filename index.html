<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ProjectsPanel Shadow Phone</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      overflow: hidden;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    * {
      box-sizing: border-box;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
      20%, 40%, 60%, 80% { transform: translateX(10px); }
    }

    /* Dashboard View */
    #dashboard {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      padding: 40px;
    }

    #dashboard.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .dashboard-content {
      width: 100%;
      max-width: 1200px;
      height: 100%;
      display: flex;
      flex-direction: column;
      padding: 40px;
    }

    .dashboard-header {
      text-align: center;
      margin-bottom: 40px;
    }

    .dashboard-title {
      font-size: 48px;
      font-weight: 700;
      margin: 0 0 10px 0;
      color: white;
      text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }

    .dashboard-subtitle {
      font-size: 18px;
      color: rgba(255, 255, 255, 0.9);
      margin: 0;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }

    .logo-corner {
      position: fixed;
      top: 30px;
      left: 30px;
      width: 70px;
      height: 70px;
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(20px);
      border-radius: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      border: 2px solid rgba(255, 255, 255, 0.3);
      z-index: 1000;
    }

    .logo-corner:hover {
      transform: scale(1.1) rotate(5deg);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      background: rgba(255, 255, 255, 0.3);
    }

    .logo-corner svg {
      width: 40px;
      height: 40px;
      fill: white;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
    }

    .notes-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      flex: 1;
      overflow-y: auto;
      padding: 20px;
    }

    .note-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      border: 2px solid rgba(255, 255, 255, 0.3);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      height: fit-content;
    }

    .note-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
    }

    .note-card h3 {
      font-size: 18px;
      font-weight: 700;
      color: #333;
      margin: 0 0 12px 0;
    }

    .note-card p {
      font-size: 14px;
      color: #666;
      line-height: 1.6;
      margin: 0;
      display: -webkit-box;
      -webkit-line-clamp: 5;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .add-note-btn {
      position: fixed;
      bottom: 40px;
      right: 40px;
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: none;
      color: white;
      font-size: 32px;
      cursor: pointer;
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.5);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 100;
    }

    .add-note-btn:hover {
      transform: scale(1.1) rotate(90deg);
      box-shadow: 0 15px 40px rgba(102, 126, 234, 0.7);
    }

    /* Phone Emulator Container */
    #phone-emulator {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 1000;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(10px);
    }

    #phone-emulator.active {
      opacity: 1;
      pointer-events: all;
    }

    .phone-frame {
      width: 480px;
      height: 900px;
      background: linear-gradient(145deg, #2a2a2a, #1a1a1a);
      border-radius: 50px;
      padding: 20px;
      box-shadow: 0 50px 120px rgba(0, 0, 0, 0.7), 
                  0 0 0 3px rgba(255, 255, 255, 0.15),
                  inset 0 1px 2px rgba(255, 255, 255, 0.1);
      position: relative;
      transform: scale(0.75);
      transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    #phone-emulator.active .phone-frame {
      transform: scale(1);
    }

    .phone-frame::before {
      content: '';
      position: absolute;
      top: 16px;
      left: 50%;
      transform: translateX(-50%);
      width: 120px;
      height: 30px;
      background: #0a0a0a;
      border-radius: 0 0 20px 20px;
      z-index: 1000;
    }

    .phone-frame::after {
      content: '';
      position: absolute;
      top: 26px;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 6px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 3px;
      z-index: 1001;
    }

    .phone-screen {
      width: 100%;
      height: 100%;
      background: #000;
      border-radius: 28px;
      overflow: hidden;
      position: relative;
    }

    /* Lockscreen */
    .lockscreen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 100;
    }

    .lockscreen.unlocked {
      opacity: 0;
      pointer-events: none;
    }

    .lock-time {
      font-size: 72px;
      font-weight: 200;
      color: white;
      text-shadow: 0 4px 20px rgba(0, 0, 0, 0.8), 0 2px 8px rgba(0, 0, 0, 0.6);
      margin-bottom: 10px;
    }

    .lock-date {
      font-size: 20px;
      font-weight: 400;
      color: rgba(255, 255, 255, 0.95);
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8), 0 1px 4px rgba(0, 0, 0, 0.6);
      margin-bottom: 60px;
    }

    .password-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
    }

    .password-input {
      background: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(30px);
      border: 2px solid rgba(255, 255, 255, 0.4);
      color: white;
      padding: 16px 32px;
      border-radius: 16px;
      font-size: 20px;
      text-align: center;
      width: 250px;
      outline: none;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
      letter-spacing: 4px;
    }

    .password-input::placeholder {
      color: rgba(255, 255, 255, 0.5);
      letter-spacing: 2px;
    }

    .password-input:focus {
      border-color: rgba(255, 255, 255, 0.6);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5), 0 0 0 4px rgba(255, 255, 255, 0.1);
    }

    .unlock-btn {
      background: rgba(255, 255, 255, 0.25);
      backdrop-filter: blur(20px);
      border: 2px solid rgba(255, 255, 255, 0.4);
      color: white;
      padding: 16px 40px;
      border-radius: 30px;
      font-size: 18px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
      font-weight: 600;
    }

    .unlock-btn:hover {
      background: rgba(255, 255, 255, 0.35);
      transform: scale(1.05);
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.5);
    }

    .error-message {
      color: #ff6b6b;
      font-size: 14px;
      margin-top: 10px;
      opacity: 0;
      transition: opacity 0.3s;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8);
      font-weight: 600;
    }

    .error-message.show {
      opacity: 1;
    }

    /* Home Screen */
    .home-screen {
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      padding: 60px 20px 20px 20px;
      position: relative;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .home-screen.active {
      opacity: 1;
      pointer-events: all;
    }

    .status-bar {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 20px;
      color: white;
      font-size: 14px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    .app-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      padding: 20px;
    }

    .app-icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .app-icon:hover {
      transform: translateY(-4px);
    }

    .app-icon-bg {
      width: 70px;
      height: 70px;
      border-radius: 18px;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(30px);
      border: 2px solid rgba(255, 255, 255, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      margin-bottom: 8px;
    }

    .app-icon:hover .app-icon-bg {
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.5), 0 0 0 2px rgba(255, 255, 255, 0.2);
      transform: scale(1.05);
      background: rgba(0, 0, 0, 0.6);
    }

    .app-icon-bg svg {
      width: 40px;
      height: 40px;
      fill: white;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
    }

    .app-name {
      font-size: 12px;
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8), 0 1px 4px rgba(0, 0, 0, 0.6);
      text-align: center;
      font-weight: 500;
    }

    .page-dots {
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      z-index: 50;
    }

    .page-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.4);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
    }

    .page-dot.active {
      background: white;
      width: 24px;
      border-radius: 4px;
    }

    .home-pages {
      display: flex;
      width: 100%;
      height: calc(100% - 40px);
      transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      margin-top: 40px;
    }

    .home-page {
      min-width: 100%;
      display: flex;
      flex-direction: column;
      padding: 20px;
    }

    .date-widget {
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(30px);
      border: 2px solid rgba(255, 255, 255, 0.4);
      border-radius: 24px;
      padding: 24px;
      margin-bottom: 30px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1);
    }

    .date-widget-date {
      font-size: 48px;
      font-weight: 700;
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8), 0 1px 4px rgba(0, 0, 0, 0.6);
      line-height: 1;
      margin-bottom: 4px;
    }

    .date-widget-full {
      font-size: 14px;
      color: rgba(255, 255, 255, 0.9);
      text-shadow: 0 1px 4px rgba(0, 0, 0, 0.8);
      font-weight: 500;
    }

    /* App Window */
    .app-window {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 200;
      display: flex;
      flex-direction: column;
    }

    .app-window.active {
      opacity: 1;
      pointer-events: all;
    }

    .app-header {
      height: 60px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 20px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .close-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .close-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.1);
    }

    .app-title {
      color: white;
      font-size: 18px;
      font-weight: 600;
    }

    .app-content {
      flex: 1;
      overflow: hidden;
    }

    .app-content iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    /* Internal Panel (Gallery, Voice Notes) */
    .internal-panel {
      position: absolute;
      top: 0;
      right: -100%;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      transition: right 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 300;
      display: flex;
      flex-direction: column;
    }

    .internal-panel.active {
      right: 0;
    }

    .panel-grid {
      flex: 1;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      padding: 20px;
      overflow-y: auto;
    }

    .panel-item {
      aspect-ratio: 1;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 12px;
    }

    .close-phone-btn {
      position: absolute;
      top: -60px;
      right: 0;
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(20px);
      border: 2px solid rgba(255, 255, 255, 0.3);
      color: white;
      padding: 12px 24px;
      border-radius: 30px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .close-phone-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.05);
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body><!-- Dashboard View -->
  <div id="dashboard">
   <div class="logo-corner" id="logoCorner" title="Open Shadow Phone">
    <svg viewbox="0 0 24 24"><path d="M17,19H7V5H17M17,1H7C5.89,1 5,1.89 5,3V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V3C19,1.89 18.1,1 17,1Z" />
    </svg>
   </div>
   <div class="dashboard-content">
    <div class="dashboard-header">
     <h1 class="dashboard-title" id="dashboardTitle">Project Ideas</h1>
     <p class="dashboard-subtitle">Your creative notes and thoughts</p>
    </div>
    <div class="notes-grid" id="notesGrid"><!-- Notes will be dynamically added here -->
    </div>
   </div><button class="add-note-btn" id="addNoteBtn" title="Add new note">+</button>
  </div><!-- Phone Emulator -->
  <div id="phone-emulator"><button class="close-phone-btn" id="closePhoneBtn">✕ Close</button>
   <div class="phone-frame">
    <div class="phone-screen"><!-- Lockscreen -->
     <div class="lockscreen" id="lockscreen">
      <div class="lock-time" id="lockTime">
       12:00
      </div>
      <div class="lock-date" id="lockDate">
       Monday, January 1
      </div>
      <div class="password-container"><input type="text" class="password-input" id="passwordInput" placeholder="Enter password" maxlength="8"> <button class="unlock-btn" id="unlockBtn">Unlock</button>
       <div class="error-message" id="errorMessage">
        Incorrect Password
       </div>
      </div>
     </div><!-- Home Screen -->
     <div class="home-screen" id="homeScreen">
      <div class="status-bar"><span id="statusTime">12:00</span> <span>⚡ 100%</span>
      </div>
      <div class="home-pages" id="homePages"><!-- Page 1 - Widget Page -->
       <div class="home-page">
        <div class="date-widget">
         <div class="date-widget-date" id="dateWidgetDate">
          1
         </div>
         <div class="date-widget-full" id="dateWidgetFull">
          January 2024
         </div>
        </div>
       </div><!-- Page 2 - Apps Page -->
       <div class="home-page">
        <div class="app-grid" id="appGrid"><!-- Apps will be generated here -->
        </div>
       </div>
      </div>
      <div class="page-dots">
       <div class="page-dot active" data-page="0"></div>
       <div class="page-dot" data-page="1"></div>
      </div>
     </div><!-- App Window -->
     <div class="app-window" id="appWindow">
      <div class="app-header"><button class="close-btn" id="closeAppBtn">✕</button>
       <div class="app-title" id="appTitle"></div>
       <div></div>
      </div>
      <div class="app-content" id="appContent"></div>
     </div><!-- Internal Panel -->
     <div class="internal-panel" id="internalPanel">
      <div class="app-header"><button class="close-btn" id="closePanelBtn">✕</button>
       <div class="app-title" id="panelTitle"></div>
       <div></div>
      </div>
      <div class="panel-grid" id="panelGrid"></div>
     </div>
    </div>
   </div>
  </div><!-- Note Editor Modal -->
  <div id="noteEditor" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); backdrop-filter: blur(10px); opacity: 0; pointer-events: none; transition: opacity 0.3s; z-index: 2000; display: flex; align-items: center; justify-content: center; padding: 40px;">
   <div style="max-width: 700px; width: 100%; background: white; border-radius: 24px; padding: 40px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); transform: scale(0.9); transition: transform 0.3s;">
    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px;"><input type="text" id="noteTitle" placeholder="Note Title" style="flex: 1; border: none; outline: none; font-size: 24px; font-weight: 700; color: #333;"> <button id="closeEditorBtn" style="width: 40px; height: 40px; border-radius: 50%; background: #f5f5f5; border: none; color: #666; cursor: pointer; font-size: 20px; transition: all 0.3s; margin-left: 20px;">✕</button>
    </div><textarea id="noteContent" placeholder="Write your ideas here..." style="width: 100%; height: 300px; border: 1px solid #e0e0e0; border-radius: 12px; padding: 16px; outline: none; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 16px; line-height: 1.6; color: #333; resize: vertical;"></textarea>
    <div style="display: flex; gap: 12px; margin-top: 24px; justify-content: flex-end;"><button id="deleteNoteBtn" style="padding: 12px 24px; border-radius: 12px; background: #ff6b6b; border: none; color: white; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s; display: none;">Delete</button> <button id="saveNoteBtn" style="padding: 12px 32px; border-radius: 12px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; color: white; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s;">Save</button>
    </div>
   </div>
  </div><!-- Phone Emulator (Existing) -->
  <div id="phone-emulator"><button class="close-phone-btn" id="closePhoneBtn">✕ Close</button>
   <div class="phone-frame">
    <div class="phone-screen"><!-- Lockscreen -->
     <div class="lockscreen" id="lockscreen">
      <div class="lock-time" id="lockTime">
       12:00
      </div>
      <div class="lock-date" id="lockDate">
       Monday, January 1
      </div>
      <div class="password-container"><input type="text" class="password-input" id="passwordInput" placeholder="Enter password" maxlength="8"> <button class="unlock-btn" id="unlockBtn">Unlock</button>
       <div class="error-message" id="errorMessage">
        Incorrect Password
       </div>
      </div>
     </div><!-- Home Screen -->
     <div class="home-screen" id="homeScreen">
      <div class="status-bar"><span id="statusTime">12:00</span> <span>⚡ 100%</span>
      </div>
      <div class="home-pages" id="homePages"><!-- Page 1 - Widget Page -->
       <div class="home-page">
        <div class="date-widget">
         <div class="date-widget-date" id="dateWidgetDate">
          1
         </div>
         <div class="date-widget-full" id="dateWidgetFull">
          January 2024
         </div>
        </div>
       </div><!-- Page 2 - Apps Page -->
       <div class="home-page">
        <div class="app-grid" id="appGrid"><!-- Apps will be generated here -->
        </div>
       </div>
      </div>
      <div class="page-dots">
       <div class="page-dot active" data-page="0"></div>
       <div class="page-dot" data-page="1"></div>
      </div>
     </div><!-- App Window -->
     <div class="app-window" id="appWindow">
      <div class="app-header"><button class="close-btn" id="closeAppBtn">✕</button>
       <div class="app-title" id="appTitle"></div>
       <div></div>
      </div>
      <div class="app-content" id="appContent"></div>
     </div><!-- Internal Panel -->
     <div class="internal-panel" id="internalPanel">
      <div class="app-header"><button class="close-btn" id="closePanelBtn">✕</button>
       <div class="app-title" id="panelTitle"></div>
       <div></div>
      </div>
      <div class="panel-grid" id="panelGrid"></div>
     </div>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      dashboard_title: "Project Ideas",
      phone_wallpaper_url: "https://i.ibb.co/yF3zBVs5/image-7.png",
      lockscreen_message: "Swipe to unlock"
    };

    const apps = [
      { name: "Notes", icon: "M3,3H21V5H3V3M3,7H15V9H3V7M3,11H21V13H3V11M3,15H15V17H3V15M3,19H21V21H3V19Z", internal: "notes" },
      { name: "Gallery", icon: "M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z", internal: "gallery" },
      { name: "Videos", icon: "M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z", internal: "videos" },
      { name: "YouTube", icon: "M10,15L15.19,12L10,9V15M21.56,7.17C21.69,7.64 21.78,8.27 21.84,9.07C21.91,9.87 21.94,10.56 21.94,11.16L22,12C22,14.19 21.84,15.8 21.56,16.83C21.31,17.73 20.73,18.31 19.83,18.56C19.36,18.69 18.5,18.78 17.18,18.84C15.88,18.91 14.69,18.94 13.59,18.94L12,19C7.81,19 5.2,18.84 4.17,18.56C3.27,18.31 2.69,17.73 2.44,16.83C2.31,16.36 2.22,15.73 2.16,14.93C2.09,14.13 2.06,13.44 2.06,12.84L2,12C2,9.81 2.16,8.2 2.44,7.17C2.69,6.27 3.27,5.69 4.17,5.44C4.64,5.31 5.5,5.22 6.82,5.16C8.12,5.09 9.31,5.06 10.41,5.06L12,5C16.19,5 18.8,5.16 19.83,5.44C20.73,5.69 21.31,6.27 21.56,7.17Z", url: "https://www.youtube.com", embedUrl: "https://www.youtube.com/embed/" },
      { name: "CrazyGames", icon: "M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6M12,8A4,4 0 0,0 8,12A4,4 0 0,0 12,16A4,4 0 0,0 16,12A4,4 0 0,0 12,8Z", url: "https://www.crazygames.com" },
      { name: "CodePen", icon: "M12,2L2,8V16L12,22L22,16V8M12,4.28L19,8.88V15.13L12,19.73L5,15.13V8.88M12,6.5L7.5,9.5L12,12.5L16.5,9.5M6.5,10.62L10.5,13V17.87L6.5,15.37M13.5,13L17.5,10.62V15.37L13.5,17.87", url: "https://codepen.io" },
      { name: "ChatGPT", icon: "M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M11,16.5L6.5,12L7.91,10.59L11,13.67L16.59,8.09L18,9.5L11,16.5Z", url: "https://chat.openai.com" },
      { name: "Canva", icon: "M21.54,8.5L13.5,0.46L5.46,8.5H2V11.5H4.41L0.46,15.46L3.54,18.54L7.5,14.59V17H10.5V13.59L12,12.09L13.5,13.59V17H16.5V14.59L20.46,18.54L23.54,15.46L19.59,11.5H22V8.5H21.54Z", url: "https://www.canva.com" },
      { name: "Facebook", icon: "M12,2C6.48,2 2,6.48 2,12C2,16.84 5.44,20.87 10,21.8V15H8V12H10V9.5C10,7.57 11.57,6 13.5,6H16V9H14C13.45,9 13,9.45 13,10V12H16V15H13V21.95C18.05,21.45 22,17.19 22,12C22,6.48 17.52,2 12,2Z", url: "https://www.facebook.com" }
    ];

    let isLocked = true;
    let currentApp = null;
    let currentPage = 0;
    let notes = [];
    let currentEditingNoteId = null;

    function updateTime() {
      const now = new Date();
      const timeStr = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false });
      const dateStr = now.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' });
      const dayNum = now.getDate();
      const monthYear = now.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
      
      document.getElementById('lockTime').textContent = timeStr;
      document.getElementById('statusTime').textContent = timeStr;
      document.getElementById('lockDate').textContent = dateStr;
      
      const dateWidgetDate = document.getElementById('dateWidgetDate');
      const dateWidgetFull = document.getElementById('dateWidgetFull');
      if (dateWidgetDate) dateWidgetDate.textContent = dayNum;
      if (dateWidgetFull) dateWidgetFull.textContent = monthYear;
    }

    function switchPage(pageIndex) {
      currentPage = pageIndex;
      const homePages = document.getElementById('homePages');
      homePages.style.transform = `translateX(-${pageIndex * 100}%)`;
      
      document.querySelectorAll('.page-dot').forEach((dot, index) => {
        dot.classList.toggle('active', index === pageIndex);
      });
    }

    function renderApps() {
      const appGrid = document.getElementById('appGrid');
      appGrid.innerHTML = '';
      
      apps.forEach(app => {
        const appEl = document.createElement('div');
        appEl.className = 'app-icon';
        appEl.innerHTML = `
          <div class="app-icon-bg">
            <svg viewBox="0 0 24 24"><path d="${app.icon}"/></svg>
          </div>
          <div class="app-name">${app.name}</div>
        `;
        
        appEl.addEventListener('click', () => openApp(app));
        appGrid.appendChild(appEl);
      });
    }

    const galleryImages = [
      "https://i.ibb.co/rV4xNx3/image-2.png",
      "https://i.ibb.co/bMB8N82w/593809384369-n.jpg",
      "https://i.ibb.co/VWGmdPqp/32242314471-n.jpg",
      "https://i.ibb.co/5WM3VXSK/n.jpg",
      "https://i.ibb.co/bjdHjCf8/024180143224-n.jpg"
    ];

    const videoLinks = [
      "https://drive.google.com/file/d/11nMXPYWxsMCnFt2a3Jzog99LEEJfMkN6/view?usp=drive_link",
      "https://drive.google.com/file/d/1L9jzcbr2m78W1EF0ceM1in878y6hQO9d/view?usp=drive_link"
    ];

    function openApp(app) {
      currentApp = app;
      
      if (app.internal === 'notes') {
        openInternalNotesInPhone();
      } else if (app.internal === 'gallery') {
        const panel = document.getElementById('internalPanel');
        const panelTitle = document.getElementById('panelTitle');
        const panelGrid = document.getElementById('panelGrid');
        
        panelTitle.textContent = app.name;
        panelGrid.innerHTML = '';
        
        galleryImages.forEach((imgUrl, index) => {
          const item = document.createElement('div');
          item.className = 'panel-item panel-image';
          item.style.backgroundImage = `url(${imgUrl})`;
          item.style.backgroundSize = 'cover';
          item.style.backgroundPosition = 'center';
          item.style.cursor = 'pointer';
          item.addEventListener('click', () => {
            openInAppWindow('Image ' + (index + 1), imgUrl, 'image');
          });
          panelGrid.appendChild(item);
        });
        
        panel.classList.add('active');
      } else if (app.internal === 'videos') {
        const panel = document.getElementById('internalPanel');
        const panelTitle = document.getElementById('panelTitle');
        const panelGrid = document.getElementById('panelGrid');
        
        panelTitle.textContent = app.name;
        panelGrid.innerHTML = '';
        
        videoLinks.forEach((videoUrl, index) => {
          const item = document.createElement('div');
          item.className = 'panel-item panel-video';
          item.innerHTML = `
            <svg viewBox="0 0 24 24" style="width: 48px; height: 48px; fill: white; margin-bottom: 8px;">
              <path d="M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z"/>
            </svg>
            <div style="font-size: 12px;">Video ${index + 1}</div>
          `;
          item.style.cursor = 'pointer';
          item.style.display = 'flex';
          item.style.flexDirection = 'column';
          item.style.alignItems = 'center';
          item.style.justifyContent = 'center';
          item.addEventListener('click', () => {
            const embedUrl = videoUrl.replace('/view?usp=drive_link', '/preview');
            openInAppWindow('Video ' + (index + 1), embedUrl, 'video');
          });
          panelGrid.appendChild(item);
        });
        
        panel.classList.add('active');
      } else if (app.url) {
        // Open URL inside phone
        openInAppWindow(app.name, app.embedUrl || app.url, 'iframe');
      }
    }

    function openInternalNotesInPhone() {
      const appWindow = document.getElementById('appWindow');
      const appTitle = document.getElementById('appTitle');
      const appContent = document.getElementById('appContent');
      
      appTitle.textContent = 'Notes';
      
      const saved = localStorage.getItem('projectNotes') || '';
      appContent.innerHTML = `
        <div style="width: 100%; height: 100%; padding: 20px; background: #f5f5f5;">
          <textarea id="phoneNotesContent" placeholder="Write your project ideas..." style="width: 100%; height: 100%; border: none; outline: none; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 16px; line-height: 1.6; color: #333; resize: none; padding: 20px; background: white; border-radius: 12px;">${saved}</textarea>
        </div>
      `;
      
      appWindow.classList.add('active');
      
      const textarea = document.getElementById('phoneNotesContent');
      textarea.addEventListener('input', (e) => {
        localStorage.setItem('projectNotes', e.target.value);
      });
    }

    function openInAppWindow(title, url, type) {
      const appWindow = document.getElementById('appWindow');
      const appTitle = document.getElementById('appTitle');
      const appContent = document.getElementById('appContent');
      
      appTitle.textContent = title;
      
      if (type === 'image') {
        appContent.innerHTML = `
          <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: #000;">
            <img src="${url}" style="max-width: 100%; max-height: 100%; object-fit: contain;">
          </div>
        `;
      } else if (type === 'video') {
        appContent.innerHTML = `<iframe src="${url}" style="width: 100%; height: 100%; border: none;" allow="autoplay"></iframe>`;
      } else if (type === 'iframe') {
        appContent.innerHTML = `
          <div style="width: 100%; height: 100%; background: #000; display: flex; flex-direction: column; align-items: center; justify-content: center;">
            <iframe src="${url}" style="width: 100%; height: 100%; border: none; background: white;" sandbox="allow-same-origin allow-scripts allow-popups allow-forms" allow="autoplay; encrypted-media; picture-in-picture"></iframe>
          </div>
        `;
      } else {
        appContent.innerHTML = `<iframe src="${url}" style="width: 100%; height: 100%; border: none;" allow="autoplay"></iframe>`;
      }
      
      appWindow.classList.add('active');
      closePanel();
    }

    function closeApp() {
      document.getElementById('appWindow').classList.remove('active');
      document.getElementById('appContent').innerHTML = '';
      currentApp = null;
    }

    function closePanel() {
      document.getElementById('internalPanel').classList.remove('active');
      document.getElementById('panelGrid').innerHTML = '';
      currentApp = null;
    }

    function unlockPhone() {
      const passwordInput = document.getElementById('passwordInput');
      const errorMessage = document.getElementById('errorMessage');
      const correctPassword = '14052010';
      
      if (passwordInput.value === correctPassword) {
        isLocked = false;
        document.getElementById('lockscreen').classList.add('unlocked');
        document.getElementById('homeScreen').classList.add('active');
        passwordInput.value = '';
        errorMessage.classList.remove('show');
      } else {
        errorMessage.classList.add('show');
        passwordInput.value = '';
        passwordInput.style.animation = 'shake 0.5s';
        setTimeout(() => {
          passwordInput.style.animation = '';
          errorMessage.classList.remove('show');
        }, 2000);
      }
    }

    function showPhone() {
      document.getElementById('dashboard').classList.add('hidden');
      document.getElementById('phone-emulator').classList.add('active');
    }

    function hidePhone() {
      document.getElementById('phone-emulator').classList.remove('active');
      document.getElementById('dashboard').classList.remove('hidden');
      
      if (!isLocked) {
        isLocked = true;
        document.getElementById('lockscreen').classList.remove('unlocked');
        document.getElementById('homeScreen').classList.remove('active');
      }
      
      closeApp();
      closePanel();
    }

    function applyConfig(config) {
      document.getElementById('dashboardTitle').textContent = config.dashboard_title || defaultConfig.dashboard_title;
      document.getElementById('unlockBtn').textContent = config.lockscreen_message || defaultConfig.lockscreen_message;
      
      const wallpaperUrl = config.phone_wallpaper_url || defaultConfig.phone_wallpaper_url;
      document.getElementById('lockscreen').style.backgroundImage = `url(${wallpaperUrl})`;
      document.getElementById('homeScreen').style.backgroundImage = `url(${wallpaperUrl})`;
    }

    // Notes Management
    function loadNotesFromStorage() {
      const saved = localStorage.getItem('projectNotes');
      notes = saved ? JSON.parse(saved) : [];
      renderNotes();
    }

    function saveNotesToStorage() {
      localStorage.setItem('projectNotes', JSON.stringify(notes));
    }

    function renderNotes() {
      const notesGrid = document.getElementById('notesGrid');
      notesGrid.innerHTML = '';
      
      if (notes.length === 0) {
        notesGrid.innerHTML = `
          <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px; color: rgba(255,255,255,0.7);">
            <svg viewBox="0 0 24 24" style="width: 80px; height: 80px; fill: rgba(255,255,255,0.3); margin-bottom: 20px;">
              <path d="M3,3H21V5H3V3M3,7H15V9H3V7M3,11H21V13H3V11M3,15H15V17H3V15M3,19H21V21H3V19Z"/>
            </svg>
            <p style="font-size: 18px; margin: 0;">No notes yet. Click the + button to create your first note!</p>
          </div>
        `;
        return;
      }
      
      notes.forEach(note => {
        const noteCard = document.createElement('div');
        noteCard.className = 'note-card';
        noteCard.innerHTML = `
          <h3>${note.title || 'Untitled'}</h3>
          <p>${note.content || ''}</p>
        `;
        noteCard.addEventListener('click', () => openNoteEditor(note.id));
        notesGrid.appendChild(noteCard);
      });
    }

    function openNoteEditor(noteId = null) {
      currentEditingNoteId = noteId;
      const editor = document.getElementById('noteEditor');
      const titleInput = document.getElementById('noteTitle');
      const contentInput = document.getElementById('noteContent');
      const deleteBtn = document.getElementById('deleteNoteBtn');
      
      if (noteId) {
        const note = notes.find(n => n.id === noteId);
        if (note) {
          titleInput.value = note.title || '';
          contentInput.value = note.content || '';
          deleteBtn.style.display = 'block';
        }
      } else {
        titleInput.value = '';
        contentInput.value = '';
        deleteBtn.style.display = 'none';
      }
      
      editor.style.opacity = '1';
      editor.style.pointerEvents = 'all';
      editor.querySelector('div').style.transform = 'scale(1)';
    }

    function closeNoteEditor() {
      const editor = document.getElementById('noteEditor');
      editor.style.opacity = '0';
      editor.style.pointerEvents = 'none';
      editor.querySelector('div').style.transform = 'scale(0.9)';
      currentEditingNoteId = null;
    }

    function saveNote() {
      const title = document.getElementById('noteTitle').value.trim();
      const content = document.getElementById('noteContent').value.trim();
      
      if (!title && !content) {
        closeNoteEditor();
        return;
      }
      
      if (currentEditingNoteId) {
        const note = notes.find(n => n.id === currentEditingNoteId);
        if (note) {
          note.title = title;
          note.content = content;
          note.updatedAt = Date.now();
        }
      } else {
        notes.push({
          id: Date.now(),
          title: title,
          content: content,
          createdAt: Date.now(),
          updatedAt: Date.now()
        });
      }
      
      saveNotesToStorage();
      renderNotes();
      closeNoteEditor();
    }

    function deleteNote() {
      if (currentEditingNoteId) {
        notes = notes.filter(n => n.id !== currentEditingNoteId);
        saveNotesToStorage();
        renderNotes();
        closeNoteEditor();
      }
    }

    // Logo corner click - opens phone
    document.getElementById('logoCorner').addEventListener('click', () => {
      showPhone();
    });

    // Add note button
    document.getElementById('addNoteBtn').addEventListener('click', () => {
      openNoteEditor();
    });

    // Note editor buttons
    document.getElementById('closeEditorBtn').addEventListener('click', closeNoteEditor);
    document.getElementById('saveNoteBtn').addEventListener('click', saveNote);
    document.getElementById('deleteNoteBtn').addEventListener('click', deleteNote);

    // Close editor on backdrop click
    document.getElementById('noteEditor').addEventListener('click', (e) => {
      if (e.target === document.getElementById('noteEditor')) {
        closeNoteEditor();
      }
    });

    // Event listeners
    document.getElementById('closePhoneBtn').addEventListener('click', hidePhone);
    document.getElementById('unlockBtn').addEventListener('click', unlockPhone);
    document.getElementById('closeAppBtn').addEventListener('click', closeApp);
    document.getElementById('closePanelBtn').addEventListener('click', closePanel);
    
    // Enter key for password
    document.getElementById('passwordInput').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        unlockPhone();
      }
    });

    // Page dot click handlers
    document.querySelectorAll('.page-dot').forEach(dot => {
      dot.addEventListener('click', () => {
        const pageIndex = parseInt(dot.dataset.page);
        switchPage(pageIndex);
      });
    });

    // Swipe navigation
    let touchStartX = 0;
    let touchEndX = 0;
    
    const homeScreen = document.getElementById('homeScreen');
    homeScreen.addEventListener('touchstart', (e) => {
      touchStartX = e.changedTouches[0].screenX;
    });
    
    homeScreen.addEventListener('touchend', (e) => {
      touchEndX = e.changedTouches[0].screenX;
      handleSwipe();
    });
    
    // Mouse swipe for desktop
    let mouseDown = false;
    homeScreen.addEventListener('mousedown', (e) => {
      mouseDown = true;
      touchStartX = e.screenX;
    });
    
    homeScreen.addEventListener('mouseup', (e) => {
      if (mouseDown) {
        touchEndX = e.screenX;
        handleSwipe();
        mouseDown = false;
      }
    });
    
    function handleSwipe() {
      const swipeDistance = touchEndX - touchStartX;
      if (Math.abs(swipeDistance) > 50) {
        if (swipeDistance > 0 && currentPage > 0) {
          switchPage(currentPage - 1);
        } else if (swipeDistance < 0 && currentPage < 1) {
          switchPage(currentPage + 1);
        }
      }
    }

    // Initialize
    loadNotesFromStorage();
    renderApps();
    updateTime();
    setInterval(updateTime, 1000);
    applyConfig(defaultConfig);

    // Element SDK Integration
    async function onConfigChange(config) {
      applyConfig(config);
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (config) => new Map([
          ["dashboard_title", config.dashboard_title || defaultConfig.dashboard_title],
          ["phone_wallpaper_url", config.phone_wallpaper_url || defaultConfig.phone_wallpaper_url],
          ["lockscreen_message", config.lockscreen_message || defaultConfig.lockscreen_message]
        ])
      });
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a8b4e28c7238b01',t:'MTc2NDg1MTMyNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
